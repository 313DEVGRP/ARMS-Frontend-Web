try{window.performance.mark("async-attachment-viewer-next.js:eval-start")}catch(e){}(window.webpackJsonp=window.webpackJsonp||[]).push([["async-attachment-viewer-next"],{"./node_modules/@atlaskit/media-ui/dist/esm/modalSpinner.js":function(e,t,n){"use strict";var i=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/@atlaskit/atlassian-navigation/node_modules/@atlaskit/theme/dist/esm/constants.js"),s=n("./node_modules/@atlaskit/spinner/dist/esm/Spinner/index.js"),c=n("./node_modules/styled-components/dist/styled-components.browser.es.js"),l=a.layers.modal()+10,d=c.default.div(m||(m=Object(i.__makeTemplateObject)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: ",";\n"],["\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  z-index: ",";\n"])),l);d.displayName="Blanket";var u=c.default.div(p||(p=Object(i.__makeTemplateObject)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"],["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"])));u.displayName="SpinnerWrapper";var m,p,f="none",w=!1;t.a=function(e){var t=e.blankedColor,n=e.invertSpinnerColor;return o.a.createElement(d,{style:{backgroundColor:t||f}},o.a.createElement(u,null,o.a.createElement(s.a,{size:"large",invertColor:n||w})))}},"./node_modules/@atlaskit/media-viewer/dist/esm/components/media-viewer-loader.js":function(e,t,n){"use strict";var i=n("./node_modules/tslib/tslib.es6.js"),r=n("./node_modules/react/index.js"),o=n.n(r),a=n("./node_modules/@atlaskit/media-ui/dist/esm/modalSpinner.js"),s=n("./node_modules/@atlaskit/atlassian-navigation/node_modules/@atlaskit/theme/dist/esm/colors.js"),c=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.state={MediaViewer:t.MediaViewer,MediaViewerErrorBoundary:t.MediaViewerErrorBoundary},n}return Object(i.__extends)(t,e),t.prototype.UNSAFE_componentWillMount=function(){return Object(i.__awaiter)(this,void 0,void 0,(function(){var e,r,o,a,s;return Object(i.__generator)(this,(function(c){switch(c.label){case 0:if(this.state.MediaViewer&&this.state.MediaViewerErrorBoundary)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,Promise.all([n.e("@atlaskit-media-client").then(n.bind(null,"./node_modules/@atlaskit/media-client/dist/esm/index.js")),n.e("@atlaskit-internal_media-viewer").then(n.bind(null,"./node_modules/@atlaskit/media-viewer/dist/esm/components/media-viewer.js")),n.e("@atlaskit-internal_MediaPickerErrorBoundary").then(n.bind(null,"./node_modules/@atlaskit/media-viewer/dist/esm/components/media-viewer-analytics-error-boundary.js"))])];case 2:return e=i.__read.apply(void 0,[c.sent(),3]),r=e[0],o=e[1],a=e[2],s=r.withMediaClient(o.MediaViewer),t.MediaViewer=s,t.MediaViewerErrorBoundary=a.default,this.setState({MediaViewer:s,MediaViewerErrorBoundary:t.MediaViewerErrorBoundary}),[3,4];case 3:return c.sent(),[3,4];case 4:return[2]}}))}))},t.prototype.render=function(){var e=this.state,t=e.MediaViewer,n=e.MediaViewerErrorBoundary;return t&&n?o.a.createElement(n,null,o.a.createElement(t,Object(i.__assign)({},this.props))):o.a.createElement(a.a,{blankedColor:s.DN30,invertSpinnerColor:!0})},t.displayName="AsyncMediaViewer",t}(o.a.PureComponent);t.a=c},"./src/packages/issue/issue-view/src/views/issue-base/content/attachment/viewer/attachment-viewer-view.js":function(e,t,n){"use strict";n.r(t),n.d(t,"AttachmentViewerNext",(function(){return x}));var i=n("./node_modules/react/index.js"),r=n.n(i),o=n("./node_modules/react-redux/es/index.js"),a=n("./node_modules/keycode/index.js"),s=n.n(a),c=n("./node_modules/@atlaskit/media-viewer/dist/esm/components/media-viewer-loader.js"),l=n("./src/packages/common-legacy-do-not-add-anything-new/src/util/create-event.js"),d=n("./src/packages/issue/issue-view/src/actions/attachment-viewer-actions.js"),u=n("./src/packages/issue/issue-view/src/common/state/selectors/media-context-selector.js"),m=n("./src/packages/issue/issue-view/src/common/util/flow-with-safe-component/index.js"),p=n("./src/packages/issue/issue-view/src/selectors/attachment-selector.js"),f=n("./node_modules/reselect/lib/index.js"),w=Object(f.createSelector)(p.a,(function(e){return e.viewer}));function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,i=k(e);if(t){var r=k(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(n,e);var t=j(n);function n(){var e;v(this,n);for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1},e.handleKeyDown=function(t){e.state.isOpen&&t.keyCode===s()("escape")&&(t.stopPropagation(),e.closeMediaViewer())},e.closeMediaViewer=function(){window.dispatchEvent(Object(l.a)("AkModalUnmount")),e.setState({isOpen:!1}),e.props.onClose()},e}return function(e,t,n){t&&h(e.prototype,t),n&&h(e,n)}(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.mediaContext;e.attachmentDetails&&t&&t.viewContext&&t.viewContext.token&&this.openMediaViewer()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown,!0)}},{key:"openMediaViewer",value:function(){window.dispatchEvent(Object(l.a)("AkModalMount")),this.setState({isOpen:!0}),document.addEventListener("keydown",this.handleKeyDown,!0)}},{key:"render",value:function(){var e=this.state.isOpen,t=this.props,n=t.mediaContext,i=t.attachmentDetails,o=t.allAttachments;if(!(e&&n&&n.viewContext&&i&&o))return null;var a=n.viewContext,s=a.serviceHost,l=a.clientId,d=a.token,u=i.mediaApiFileId,m={id:u,mediaItemType:"file"},p=o.some((function(e){return e.id===u}))?o.map((function(e){return{id:e.id,mediaItemType:"file"}})):[m];if(!d)return null;var f={authProvider:function(){return Promise.resolve({clientId:l,token:d,baseUrl:s})}};return(r.a.createElement(c.a,{onClose:this.closeMediaViewer,mediaClientConfig:f,selectedItem:m,dataSource:{list:p},featureFlags:{customVideoPlayer:!0}}))}}]),n}(i.Component);x.displayName="AttachmentViewerNext",x.displayName="AttachmentViewerNext";t.default=Object(m.a)([Object(o.connect)((function(e){return{attachmentDetails:w(e),mediaContext:Object(u.a)(e),allAttachments:Object(p.d)(e)}}),(function(e){return{onClose:function(){return e(Object(d.c)())}}}))])(x)}}]);try{window.__jsEvalStop("async-attachment-viewer-next.js")}catch(e){}
//# sourceMappingURL=https://statlas.prod.atl-paas.net/jira-frontend-source-maps/assets/async-attachment-viewer-next.41220bc3c440000f9ef2.8.js.map